{"version":3,"names":["_react","_interopRequireWildcard","require","_zegoUikitRn","_reactNative","_defines","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ZegoCoHostMenuDialog","props","countdownMap","useRef","countdownTimerMap","visable","inviteeID","invitationType","ZegoInvitationType","inviteToCoHost","onCancel","onOk","setIsToastVisable","setToastExtendedData","resetTimer","inviteeCountdown","current","clearInterval","getCustomContainerStyle","StyleSheet","create","customContainer","display","willPressedHandle","result","console","log","type","ZegoToastType","error","text","ZegoTranslationText","repeatInviteCoHostFailedToast","setInterval","ZegoUIKit","getUser","inviteCoHostFailedToast","removeHandle","removeUserFromRoom","then","useEffect","Map","Array","from","keys","forEach","createElement","View","style","styles","container","ZegoSendInvitationButton","backgroundColor","width","height","fontSize","color","inviteCoHostButton","replace","removeCoHostButton","invitees","onWillPressed","onPressed","divide","TouchableOpacity","removeButton","onPress","Text","removeText","removeUserMenuDialogButton","cancelButton","cancelText","cancelMenuDialogButton","zIndex","position","bottom","borderTopLeftRadius","borderTopRightRadius","opacity","alignItems","justifyContent"],"sources":["ZegoCoHostMenuDialog.tsx"],"sourcesContent":["import React, { useEffect, useRef }from \"react\";\nimport ZegoUIKit from '@zegocloud/zego-uikit-rn';\nimport { StyleSheet, View, Text, TouchableOpacity } from \"react-native\";\nimport { ZegoSendInvitationButton } from '@zegocloud/zego-uikit-rn';\nimport { ZegoTranslationText, ZegoInvitationType, ZegoToastType } from \"../services/defines\";\n\n\nexport default function ZegoCoHostMenuDialog(props: any) {\n    const countdownMap = useRef();\n    const countdownTimerMap = useRef();\n    const {\n        visable,\n        inviteeID,\n        invitationType = ZegoInvitationType.inviteToCoHost,\n        onCancel,\n        onOk,\n        setIsToastVisable,\n        setToastExtendedData,\n        resetTimer,\n    } = props;\n\n    if (visable) {\n        const inviteeCountdown = (countdownMap.current as any).get(inviteeID);\n        if (!inviteeCountdown) {\n            (countdownMap.current as any).set(inviteeID, 60);\n        }\n    }\n    if (resetTimer) {\n        // Reset invitation timer\n        clearInterval((countdownTimerMap.current as any).get(inviteeID));\n        (countdownMap.current as any).set(inviteeID, 60);\n        (countdownTimerMap.current as any).set(inviteeID, null);\n    }\n\n    const getCustomContainerStyle = (visable: boolean) => StyleSheet.create({\n        customContainer: {\n            display: visable ? 'flex' : 'none',\n        },\n    });\n    // Verify whether invitations can be sent\n    const willPressedHandle = () => {\n        let result = true;\n        if (invitationType === ZegoInvitationType.inviteToCoHost) {\n            // Check whether the timer is running out\n            console.log('#########Timer: Check whether the timer is running out', countdownMap.current, countdownTimerMap.current);\n\n            if ((countdownTimerMap.current as any).get(inviteeID)) {\n                // The timer did not complete and the request was not allowed to occur\n                console.log('#########Timer: The timer did not complete and the request was not allowed to occur', countdownMap.current, countdownTimerMap.current);\n                setIsToastVisable(true);\n                setToastExtendedData({ type: ZegoToastType.error, text: ZegoTranslationText.repeatInviteCoHostFailedToast });\n                onCancel();\n                result = false;\n            } else {\n                // Restart timer\n                clearInterval((countdownTimerMap.current as any).get(inviteeID));\n                (countdownTimerMap.current as any).set(inviteeID ,setInterval(() => {\n                    console.log('#########Timer: countdown', countdownMap.current, countdownTimerMap.current);\n                    if ((countdownMap.current as any).get(inviteeID) === 0) {\n                        clearInterval((countdownTimerMap.current as any).get(inviteeID));\n                        (countdownTimerMap.current as any).set(inviteeID, null);\n                        (countdownMap.current as any).set(inviteeID, 60);\n                    } else {\n                        (countdownMap.current as any).set(inviteeID, (countdownMap.current as any).get(inviteeID) - 1);\n                    }\n                }, 1000));\n                if (!ZegoUIKit.getUser(inviteeID)) {\n                    result = false;\n                    setIsToastVisable(true);\n                    setToastExtendedData({ type: ZegoToastType.error, text: ZegoTranslationText.inviteCoHostFailedToast });\n                    onCancel();\n                }\n            }\n        }\n        return result;\n    }\n    const removeHandle = () => {\n        ZegoUIKit.removeUserFromRoom([inviteeID]).then(() => {\n            console.log(`remove ${inviteeID} from room successfully`);\n            // The handling here is the same as the cancel\n            onCancel();\n        });\n        \n    }\n\n    useEffect(() => {\n        // First render initializes and clears timer\n        console.log('#########Timer: First render initializes and clears timer', countdownMap.current, countdownTimerMap.current);\n        (countdownMap.current as any) = new Map();\n        (countdownTimerMap.current as any) = new Map();\n        return () => {\n            // Initializes and clears timer when component is destroyed\n            console.log('#########Timer: Initializes and clears timer when component is destroyed', countdownMap.current, countdownTimerMap.current);\n            Array.from((countdownTimerMap.current as any).keys()).forEach((key) => {\n                clearInterval((countdownTimerMap.current as any).get(key));\n                (countdownTimerMap.current as any).set(key, null);\n            });\n        };\n    }, []);\n\n    return <View style={[styles.container, getCustomContainerStyle(visable).customContainer]}>\n        <ZegoSendInvitationButton\n            backgroundColor={'transparent'}\n            width='100%'\n            height={50}\n            fontSize={14}\n            color='#fff'\n            text={\n                invitationType === ZegoInvitationType.inviteToCoHost ?\n                    ZegoTranslationText.inviteCoHostButton.replace('%0', inviteeID) :\n                    ZegoTranslationText.removeCoHostButton\n            }\n            invitees={[inviteeID]}\n            type={invitationType}\n            onWillPressed={willPressedHandle}\n            onPressed={onOk}\n        ></ZegoSendInvitationButton>\n        <View style={styles.divide}></View>\n        {/* remove xxx from the room */}\n        <TouchableOpacity style={styles.removeButton} onPress={removeHandle}>\n            <Text style={styles.removeText}>{ZegoTranslationText.removeUserMenuDialogButton.replace('%0', inviteeID)}</Text>\n        </TouchableOpacity>\n        <View style={styles.divide}></View>\n        <TouchableOpacity style={styles.cancelButton} onPress={onCancel}>\n            <Text style={styles.cancelText}>{ZegoTranslationText.cancelMenuDialogButton}</Text>\n        </TouchableOpacity>\n    </View>\n}\n \nconst styles = StyleSheet.create({\n    container: {\n        width: '100%',\n        zIndex: 12,\n        position: 'absolute',\n        bottom: 0,\n        borderTopLeftRadius: 16,\n        borderTopRightRadius: 16,\n        backgroundColor: 'rgba(17,16,20,0.9)',\n    },\n    divide: {\n        width: '100%',\n        height: 1,\n        backgroundColor: '#FFFFFF',\n        opacity: 0.1,\n    },\n    cancelButton: {\n        width: '100%',\n        height: 50,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    cancelText: {\n        fontSize: 14,\n        color: '#fff',\n    },\n    removeButton: {\n        height: 50,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    removeText: {\n        fontSize: 14,\n        color: '#fff',\n    },\n});"],"mappings":"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"}