{"version":3,"names":["ZegoPluginInvitationService","ZegoUIKitPluginType","ZegoPluginRoomPropertiesService","ZegoPluginInRoomMessageService","ZegoPluginUserInRoomAttributesService","ZegoUIKitSignalingPlugin","constructor","_defineProperty","signaling","shared","getInstance","getVersion","then","zimVersion","getZIMInstance","getPluginType","_signaling","setBackgroundMessageHandler","setAndroidOfflineDataHandler","handler","setIOSOfflineDataHandler","onCallKitAnswerCall","onCallKitEndCall","reportCallKitCallEnded","uuid","reason","queryCallList","count","nextFlag","sendInRoomTextMessage","roomID","message","sendInRoomCommandMessage","invoke","method","params","init","appID","appSign","uninit","login","userID","userName","enableNotifyWhenAppRunningInBackgroundOrQuit","enable","isIOSDevelopmentEnvironment","appName","logout","sendInvitation","inviterName","invitees","timeout","type","data","notificationConfig","cancelInvitation","refuseInvitation","inviterID","acceptInvitation","joinRoom","leaveRoom","setUsersInRoomAttributes","key","value","userIDs","queryUsersInRoomAttributes","updateRoomProperty","isDeleteAfterOwnerLeft","isForce","isUpdateOwner","deleteRoomProperties","keys","beginRoomPropertiesBatchOperation","endRoomPropertiesBatchOperation","queryRoomProperties","Promise","reject","registerPluginEventHandler","event","callbackID","callback","onConnectionStateChanged","onCallInvitationReceived","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationCancelled","onUsersInRoomAttributesUpdated","onRoomPropertyUpdated","onInRoomTextMessageReceived","onInRoomCommandMessageReceived","_class"],"sources":["index.ts"],"sourcesContent":["import ZegoPluginInvitationService from './services';\nimport { ZegoUIKitPluginType } from './defines';\nimport ZegoPluginRoomPropertiesService from './services/room_properties_service';\nimport ZegoPluginInRoomMessageService from './services/in_room_message_service';\nimport ZegoPluginUserInRoomAttributesService from './services/user_in_room_attributes_service';\nimport type { CXAction } from 'zego-zpns-react-native';\n\nexport default class ZegoUIKitSignalingPlugin {\n  static shared: ZegoUIKitSignalingPlugin;\n  _signaling = ZegoUIKitPluginType.signaling;\n  constructor() {\n    if (!ZegoUIKitSignalingPlugin.shared) {\n      ZegoUIKitSignalingPlugin.shared = this;\n    }\n    return ZegoUIKitSignalingPlugin.shared;\n  }\n  static getInstance() {\n    if (!ZegoUIKitSignalingPlugin.shared) {\n      ZegoUIKitSignalingPlugin.shared = new ZegoUIKitSignalingPlugin();\n    }\n    return ZegoUIKitSignalingPlugin.shared;\n  }\n  static getVersion() {\n    return ZegoPluginInvitationService.getInstance()\n      .getVersion()\n      .then((zimVersion) => {\n        return `signaling_plugin:1.0.0;zim:${zimVersion}`;\n      });\n  }\n  getZIMInstance() {\n    return ZegoPluginInvitationService.getInstance().getZIMInstance();\n  }\n  getPluginType() {\n    return this._signaling;\n  }\n  setBackgroundMessageHandler() {\n    ZegoPluginInvitationService.getInstance().setBackgroundMessageHandler();\n  }\n  setAndroidOfflineDataHandler(handler: (data: any) => void) {\n    ZegoPluginInvitationService.getInstance().setAndroidOfflineDataHandler(handler);\n  }\n  setIOSOfflineDataHandler(handler: (data: any, uuid: string) => void) {\n    ZegoPluginInvitationService.getInstance().setIOSOfflineDataHandler(handler);\n  }\n  onCallKitAnswerCall(handler: (action: CXAction) => void) {\n    ZegoPluginInvitationService.getInstance().onCallKitAnswerCall(handler);\n  }\n  onCallKitEndCall(handler: (action: CXAction) => void) {\n    ZegoPluginInvitationService.getInstance().onCallKitEndCall(handler);\n  }\n  reportCallKitCallEnded(uuid: string, reason: number) {\n    ZegoPluginInvitationService.getInstance().reportCallKitCallEnded(uuid, reason);\n  }\n  queryCallList(count: number, nextFlag?: number) {\n    return ZegoPluginInvitationService.getInstance().queryCallList(count, nextFlag);\n  }\n  sendInRoomTextMessage(roomID: string, message: string) {\n    return ZegoPluginInRoomMessageService.getInstance().sendInRoomTextMessage(roomID, message);\n  }\n  sendInRoomCommandMessage(roomID: string, message: string): Promise<void> {\n    return ZegoPluginInRoomMessageService.getInstance().sendInRoomCommandMessage(roomID, message);\n  }\n  invoke(method: string, params?: any) {\n    switch (method) {\n      case 'init':\n        return ZegoPluginInvitationService.getInstance().init(\n          params.appID,\n          params.appSign\n        );\n      case 'uninit':\n        return ZegoPluginInvitationService.getInstance().uninit();\n      case 'login':\n        return ZegoPluginInvitationService.getInstance().login(\n          params.userID,\n          params.userName\n        );\n      case 'enableNotifyWhenAppRunningInBackgroundOrQuit':\n        return ZegoPluginInvitationService.getInstance().enableNotifyWhenAppRunningInBackgroundOrQuit(params.enable, params.isIOSDevelopmentEnvironment, params.appName)\n      case 'logout':\n        return ZegoPluginInvitationService.getInstance().logout();\n      case 'sendInvitation':\n        return ZegoPluginInvitationService.getInstance().sendInvitation(\n          params.inviterName,\n          params.invitees,\n          params.timeout,\n          params.type,\n          params.data,\n          params.notificationConfig,\n        );\n      case 'cancelInvitation':\n        return ZegoPluginInvitationService.getInstance().cancelInvitation(\n          params.invitees,\n          params.data\n        );\n      case 'reportCallKitCallEnded':\n        return ZegoPluginInvitationService.getInstance().reportCallKitCallEnded(\n          params.uuid,\n          params.reason\n        );\n      case 'refuseInvitation':\n        return ZegoPluginInvitationService.getInstance().refuseInvitation(\n          params.inviterID,\n          params.data\n        );\n      case 'acceptInvitation':\n        return ZegoPluginInvitationService.getInstance().acceptInvitation(\n          params.inviterID,\n          params.data\n        );\n      // UserInRoomAttributes\n      case 'joinRoom':\n        return ZegoPluginUserInRoomAttributesService.getInstance().joinRoom(\n          params.roomID\n        );\n      case 'leaveRoom':\n        return ZegoPluginUserInRoomAttributesService.getInstance().leaveRoom();\n      case 'setUsersInRoomAttributes':\n        return ZegoPluginUserInRoomAttributesService.getInstance().setUsersInRoomAttributes(\n          params.key,\n          params.value,\n          params.userIDs\n        );\n      case 'queryUsersInRoomAttributes':\n        return ZegoPluginUserInRoomAttributesService.getInstance().queryUsersInRoomAttributes(\n          params.nextFlag,\n          params.count\n        );\n      // RoomProperties\n      case 'updateRoomProperty':\n        return ZegoPluginRoomPropertiesService.getInstance().updateRoomProperty(\n          params.key,\n          params.value,\n          params.isDeleteAfterOwnerLeft,\n          params.isForce,\n          params.isUpdateOwner\n        );\n      case 'deleteRoomProperties':\n        return ZegoPluginRoomPropertiesService.getInstance().deleteRoomProperties(\n          params.keys,\n          params.isForce\n        );\n      case 'beginRoomPropertiesBatchOperation':\n        return ZegoPluginRoomPropertiesService.getInstance().beginRoomPropertiesBatchOperation(\n          params.isDeleteAfterOwnerLeft,\n          params.isForce,\n          params.isUpdateOwner\n        );\n      case 'endRoomPropertiesBatchOperation':\n        return ZegoPluginRoomPropertiesService.getInstance().endRoomPropertiesBatchOperation();\n      case 'queryRoomProperties':\n        return ZegoPluginRoomPropertiesService.getInstance().queryRoomProperties();\n      default:\n        return Promise.reject();\n    }\n  }\n  registerPluginEventHandler(event: string, callbackID: string, callback: any) {\n    switch (event) {\n      case 'connectionStateChanged':\n        ZegoPluginInvitationService.getInstance().onConnectionStateChanged(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationReceived':\n        ZegoPluginInvitationService.getInstance().onCallInvitationReceived(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationTimeout':\n        ZegoPluginInvitationService.getInstance().onCallInvitationTimeout(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationResponseTimeout':\n        ZegoPluginInvitationService.getInstance().onCallInviteesAnsweredTimeout(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationAccepted':\n        ZegoPluginInvitationService.getInstance().onCallInvitationAccepted(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationRefused':\n        ZegoPluginInvitationService.getInstance().onCallInvitationRejected(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationCanceled':\n        ZegoPluginInvitationService.getInstance().onCallInvitationCancelled(\n          callbackID,\n          callback\n        );\n        break;\n      // UserInRoomAttributes\n      case 'usersInRoomAttributesUpdated':\n        ZegoPluginUserInRoomAttributesService.getInstance().onUsersInRoomAttributesUpdated(\n          callbackID,\n          callback\n        );\n        break;\n      // RoomProperties\n      case 'roomPropertyUpdated':\n        ZegoPluginRoomPropertiesService.getInstance().onRoomPropertyUpdated(\n          callbackID,\n          callback\n        );\n        break;\n      case 'inRoomTextMessageReceived':\n        ZegoPluginInRoomMessageService.getInstance().onInRoomTextMessageReceived(\n          callbackID,\n          callback\n        );\n        break;\n      case 'onInRoomCommandMessageReceived':\n        ZegoPluginInRoomMessageService.getInstance().onInRoomCommandMessageReceived(\n          callbackID,\n          callback\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n"],"mappings":"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"}