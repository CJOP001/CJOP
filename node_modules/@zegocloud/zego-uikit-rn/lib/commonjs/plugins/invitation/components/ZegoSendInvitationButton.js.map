{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_services","_interopRequireDefault","_ZegoInvitationType","_logger","_ZegoUIKitInternal","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ZegoSendInvitationButton","props","icon","text","invitees","type","ZegoInvitationType","videoCall","data","timeout","onPressed","onFailure","onWillPressed","backgroundColor","fontSize","color","width","height","borderRadius","borderWidth","borderColor","borderStyle","verticalLayout","resourceID","notificationTitle","notificationMessage","getImageSourceByPath","getRenderView","renderView","undefined","createElement","Image","resizeMode","source","Text","style","getCustomTextStyle","Fragment","marginRight","StyleSheet","create","getCustomContainerStyle","customContainer","flexDirection","onButtonPress","canSendInvitation","console","log","then","catch","error","temp","zloginfo","ZegoUIKitInvitationService","sendInvitation","title","message","_ref","code","callID","errorInvitees","length","inviteesBackup","JSON","parse","stringify","forEach","errorInviteeID","index","findIndex","inviteeID","splice","invitationID","errorCode","errorMessage","_ref2","ZegoUIKitInternal","notifyErrorUpdate","zlogerror","TouchableOpacity","styles","container","onPress","alignItems","justifyContent"],"sources":["ZegoSendInvitationButton.tsx"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { Text, Image, TouchableOpacity, StyleSheet } from 'react-native';\nimport ZegoUIKitInvitationService from '../services';\nimport ZegoInvitationType from './ZegoInvitationType';\nimport { zloginfo, zlogerror } from '../../../utils/logger';\nimport ZegoUIKitInternal from '../../../components/internal/ZegoUIKitInternal';\n\nexport default function ZegoSendInvitationButton(props: any) {\n  const {\n    icon,\n    text,\n    invitees = [],\n    type = ZegoInvitationType.videoCall,\n    data,\n    timeout = 60,\n    onPressed,\n    onFailure,\n    onWillPressed,\n    backgroundColor = '#F3F4F7',\n    fontSize = 16,\n    color = '#2A2A2A',\n    width = 42,\n    height = 42,\n    borderRadius = 1000,\n    borderWidth,\n    borderColor,\n    borderStyle,\n    verticalLayout, // Default row layout, no layout parameters default to precedence icon\n    resourceID,\n    notificationTitle,\n    notificationMessage\n  } = props;\n  const getImageSourceByPath = () => {\n    if (type === ZegoInvitationType.videoCall) {\n      return require('../resources/blue_button_video_call.png');\n    } else {\n      return require('../resources/blue_button_audio_call.png');\n    }\n  };\n  const getRenderView = () => {\n    let renderView;\n    if (verticalLayout === undefined) {\n      // Choose between icon and text\n      if (icon) {\n        renderView = <Image resizeMode=\"contain\" source={icon} />;\n      } else {\n        if (!text) {\n          renderView = (\n            <Image resizeMode=\"contain\" source={getImageSourceByPath()} />\n          );\n        } else {\n          renderView = <Text style={getCustomTextStyle(fontSize, color).text}>{text}</Text>;\n        }\n      }\n    } else {\n      // Both icon and text exist\n      renderView = <Fragment>\n        <Image resizeMode=\"contain\" source={icon || getImageSourceByPath()} style={{marginRight: 6}}/>\n        <Text style={getCustomTextStyle(fontSize, color).text}>{text}</Text>\n      </Fragment>\n    }\n    return renderView;\n  };\n  const getCustomTextStyle = (fontSize: number, color: string) => StyleSheet.create({\n    text: {\n      fontSize,\n      color,\n    },\n  });\n  const getCustomContainerStyle = () => StyleSheet.create({\n    customContainer: {\n      flexDirection: verticalLayout ? 'column' : 'row',\n      width: width,\n      height: height,\n      backgroundColor: backgroundColor,\n      borderRadius: borderRadius,\n      borderWidth: borderWidth,\n      borderColor: borderColor,\n      borderStyle: borderStyle,\n    },\n  });\n\n  const onButtonPress = async () => {\n    let canSendInvitation = true;\n    if (onWillPressed) {\n      console.log('#########onWillPressed judge', typeof onWillPressed === 'object', typeof (onWillPressed.then) === 'function', typeof (onWillPressed.catch) === 'function');\n      if (typeof onWillPressed === 'object' && typeof (onWillPressed.then) === 'function' && typeof (onWillPressed.catch) === 'function') {\n        // Promise\n        console.log('#########onWillPressed promise', onWillPressed);\n        try {\n          canSendInvitation = await onWillPressed;\n        } catch (error) {\n          canSendInvitation = false;\n        }\n      } else if (typeof onWillPressed === 'function') {\n        console.log('#########onWillPressed function', onWillPressed);\n        const temp = onWillPressed();\n        if (typeof temp === 'object' && typeof (temp.then) === 'function' && typeof (temp.catch) === 'function') {\n          console.log('#########onWillPressed promise', temp);\n          try {\n            canSendInvitation = await temp;\n          } catch (error) {\n            canSendInvitation = false;\n          }\n        } else {\n          canSendInvitation = temp;\n        }\n      }\n    }\n    if (!canSendInvitation) return;\n    zloginfo(\n      `[Components]Send invitation start, invitees: ${invitees}, timeout: ${timeout}, type: ${type}, data: ${data}`\n    );\n    ZegoUIKitInvitationService.sendInvitation(invitees, timeout, type, data, { resourceID, title: notificationTitle, message: notificationMessage })\n      .then(({ code, message, callID, errorInvitees }: any) => {\n        zloginfo(\n          `[Components]Send invitation success, code: ${code}, message: ${message}, errorInvitees: ${errorInvitees}`\n        );\n        if (invitees.length > errorInvitees.length) {\n          if (typeof onPressed === 'function') {\n            const inviteesBackup = JSON.parse(JSON.stringify(invitees));\n            errorInvitees.forEach((errorInviteeID: string) => {\n              const index = inviteesBackup.findIndex(\n                (inviteeID: string) => errorInviteeID === inviteeID\n              );\n              index !== -1 && inviteesBackup.splice(index, 1);\n            });\n            onPressed({\n              invitationID: callID,\n              errorCode: code,\n              errorMessage: message,\n              errorInvitees,\n              invitees: inviteesBackup,\n            });\n          }\n        }\n      })\n      .catch(({ code, message }: any) => {\n        ZegoUIKitInternal.notifyErrorUpdate('SendInvitation', code, message);\n        if (typeof onFailure === 'function') {\n          onFailure({ code: code, message: message });\n        }\n        zlogerror(\n          `[Components]Send invitation error, code: ${code}, message: ${message}`\n        );\n      });\n  };\n  return (\n    <TouchableOpacity\n      style={[\n        styles.container,\n        getCustomContainerStyle().customContainer\n      ]}\n      onPress={onButtonPress}\n    >\n      {getRenderView()}\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n"],"mappings":"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"}